<?php

/*
 * Escape key JS package for Bear Framework
 * https://github.com/ivopetkov/escape-key-js-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */

return <<<'EOT'
var ivoPetkov=ivoPetkov||{};ivoPetkov.bearFrameworkAddons=ivoPetkov.bearFrameworkAddons||{},ivoPetkov.bearFrameworkAddons.escapeKey=ivoPetkov.bearFrameworkAddons.escapeKey||function(){var e=[],o=function(o){e=e.filter((function(e){return e!=o}))},n=!1,r=function(){n||null===document.body||(n=!0,document.body.addEventListener("keydown",(function(n){"Escape"===n.code&&function(){var n=e.length;if(0!==n){for(var r=[],t=n-1;t>=0;t--){var a=e[t],d=!1;try{d=a()}catch(e){d=null}if(!1===d)return;if(r.push(a),!0===d)break}for(t=0;t<r.length;t++)o(r[t])}}()})))};return document.addEventListener("readystatechange",()=>{r()}),r(),{addHandler:function(o){e.push(o)},removeHandler:o}}();
EOT;
